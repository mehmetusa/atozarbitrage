(()=>{var a={};a.id=921,a.ids=[636,921,3220],a.modules={361:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},638:(a,b,c)=>{"use strict";c.d(b,{A:()=>h});var d=c(8732),e=c(2015),f=c(5260),g=c.n(f);let h=({message:a,show:b,setShow:c})=>((0,e.useEffect)(()=>{if(b){let a=setTimeout(()=>c(!1),3e3);return()=>clearTimeout(a)}},[b,c]),b&&(0,d.jsx)("div",{className:g().toast,children:a}))},1242:a=>{"use strict";a.exports=require("redux-persist/integration/react")},1428:a=>{"use strict";a.exports=import("axios")},2015:a=>{"use strict";a.exports=require("react")},2326:a=>{"use strict";a.exports=require("react-dom")},2541:a=>{"use strict";a.exports=require("redux-persist/lib/storage")},2898:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l});var e=c(8732),f=c(6761),g=c.n(f),h=c(3220),i=c(8136),j=c.n(i),k=a([h]);function l({message:a="Loading..."}){return(0,e.jsxs)("div",{className:j().wrapper,children:[(0,e.jsx)(h.motion.div,{animate:{rotate:360},transition:{repeat:1/0,duration:4,ease:"linear"},className:j().ring,children:(0,e.jsx)(g(),{src:"/img/Amazon-outer.png",alt:"Amazon Arbirtage Ring",fill:!0,className:j().ringImg})}),(0,e.jsx)("div",{className:j().inner,children:(0,e.jsx)(g(),{src:"/img/Amazon-inner.png",alt:"Baker",fill:!0,className:j().innerImg})}),(0,e.jsx)("p",{className:j().message,children:a})]})}h=(k.then?(await k)():k)[0],d()}catch(a){d(a)}})},3220:a=>{"use strict";a.exports=import("framer-motion")},3787:a=>{"use strict";a.exports=require("redux-persist")},3873:a=>{"use strict";a.exports=require("path")},4062:a=>{"use strict";a.exports=import("react-redux")},4075:a=>{"use strict";a.exports=require("zlib")},4722:a=>{"use strict";a.exports=require("next-auth/react")},5062:a=>{a.exports={container:"User_container__D_bIk",header:"User_header___WHdl",logoutButton:"User_logoutButton__Vna_3",contentWrapper:"User_contentWrapper__aIH8p",userInfoSection:"User_userInfoSection__hOPuJ",userInfoCard:"User_userInfoCard__wd3IA",userInfoRow:"User_userInfoRow__IJVuT",label:"User_label__KJXJE",value:"User_value___w2lU",inputField:"User_inputField__FdVkD",buttonWrapper:"User_buttonWrapper__mTp2q",editButton:"User_editButton__e0Uwz",saveButton:"User_saveButton__0al_H",ordersSection:"User_ordersSection__U8Nqc",ordersContainer:"User_ordersContainer__8cUbp",orderCard:"User_orderCard__R6_By",itemsContainer:"User_itemsContainer__ljIKt",itemRow:"User_itemRow___3PHl",itemImage:"User_itemImage__MH9EY",itemDetails:"User_itemDetails__KsLE6",status:"User_status__mhG8j",preparing:"User_preparing__vixcS",onTheWay:"User_onTheWay__JC66R",delivered:"User_delivered__3xjtg"}},5260:a=>{a.exports={toast:"Toast_toast__Jg6J0",fadeInScale:"Toast_fadeInScale__FGfBY"}},6060:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},6401:a=>{"use strict";a.exports=require("next-seo")},6514:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>r,default:()=>n,getServerSideProps:()=>q,getStaticPaths:()=>p,getStaticProps:()=>o,handler:()=>z,reportWebVitals:()=>s,routeModule:()=>y,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>u,unstable_getStaticProps:()=>t});var e=c(3885),f=c(237),g=c(1413),h=c(3317),i=c.n(h),j=c(6095),k=c(9320),l=c(2289),m=a([j,k]);[j,k]=m.then?(await m)():m;let n=(0,g.M)(k,"default"),o=(0,g.M)(k,"getStaticProps"),p=(0,g.M)(k,"getStaticPaths"),q=(0,g.M)(k,"getServerSideProps"),r=(0,g.M)(k,"config"),s=(0,g.M)(k,"reportWebVitals"),t=(0,g.M)(k,"unstable_getStaticProps"),u=(0,g.M)(k,"unstable_getStaticPaths"),v=(0,g.M)(k,"unstable_getStaticParams"),w=(0,g.M)(k,"unstable_getServerProps"),x=(0,g.M)(k,"unstable_getServerSideProps"),y=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/user",pathname:"/user",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:k}),z=(0,l.U)({srcPage:"/user",config:r,userland:k,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});d()}catch(a){d(a)}})},7910:a=>{"use strict";a.exports=require("stream")},8136:a=>{a.exports={wrapper:"LoadingSpinner_wrapper__H5N5p",ring:"LoadingSpinner_ring__xh1P9",ringImg:"LoadingSpinner_ringImg__bUgON",inner:"LoadingSpinner_inner__wyHgX",innerImg:"LoadingSpinner_innerImg__DK6h4",message:"LoadingSpinner_message__o_zuw"}},8732:a=>{"use strict";a.exports=require("react/jsx-runtime")},9021:a=>{"use strict";a.exports=require("fs")},9198:a=>{"use strict";a.exports=import("@reduxjs/toolkit")},9320:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>q});var e=c(8732),f=c(4722),g=c(4233),h=c(2015),i=c(1428),j=c(5062),k=c.n(j),l=c(4062),m=c(1586),n=c(638),o=c(2898),p=a([i,l,m,o]);function q(){let{data:a,status:b}=(0,f.useSession)();(0,g.useRouter)();let c=(0,l.useDispatch)(),[d,j]=(0,h.useState)(!1),[p,q]=(0,h.useState)([]),[r,s]=(0,h.useState)(null),[t,u]=(0,h.useState)({name:"",email:"",phone:"",addresses:[{street:"",city:"",state:"",zip:"",country:""}]}),[v,w]=(0,h.useState)({show:!1,message:""}),x=async()=>{try{let a={name:t.name,phone:t.phone,address:t.addresses[0]},b=(await i.default.put(`/api/user/${encodeURIComponent(t.email)}`,a)).data,d=Array.isArray(b.addresses)&&b.addresses.length>0?b.addresses:[{street:"",city:"",state:"",zip:"",country:"USA",isDefault:!0}];u({...b,addresses:d}),j(!1),c((0,m.gV)({id:b._id,name:b.name,email:b.email,phone:b.phone,addresses:d,role:b.role||"user",deliveryDate:b.deliveryDate||"",deliverySlot:b.deliverySlot||"",couponCode:b.couponCode||"",couponDiscount:b.couponDiscount||0})),w({show:!0,message:"Profile updated successfully!"})}catch(a){console.error(a),w({show:!0,message:"Failed to update profile"})}};return"loading"===b?(0,e.jsx)(o.A,{message:"Baking something fresh for you..."}):a&&"user"===a.user.role?(0,e.jsxs)("div",{className:k().container,children:[(0,e.jsxs)("div",{className:k().header,children:[(0,e.jsx)("h1",{children:"User Panel"}),(0,e.jsxs)("p",{children:["Welcome, ",(0,e.jsx)("b",{children:t.name})]}),(0,e.jsx)("button",{className:k().logoutButton,onClick:()=>(0,f.signOut)(),children:"Logout"})]}),(0,e.jsxs)("div",{className:k().contentWrapper,children:[(0,e.jsxs)("div",{className:k().userInfoSection,children:[(0,e.jsx)("h2",{children:"User Info"}),(0,e.jsxs)("div",{className:k().userInfoCard,children:[[{key:"name",label:"Name",type:"text"},{key:"email",label:"Email",type:"email",disabled:!0},{key:"phone",label:"Phone",type:"text"}].map(({key:a,label:b,type:c,disabled:f})=>(0,e.jsxs)("div",{className:k().userInfoRow,children:[(0,e.jsx)("span",{className:k().label,children:b}),d?(0,e.jsx)("input",{type:c,disabled:f,value:t[a]||"",onChange:b=>u({...t,[a]:b.target.value}),className:k().inputField}):(0,e.jsx)("span",{className:k().value,children:t[a]||"-"})]},a)),(0,e.jsx)("h3",{children:"Address"}),[{key:"street",label:"Street"},{key:"city",label:"City"},{key:"state",label:"State"},{key:"zip",label:"ZIP"},{key:"country",label:"Country"}].map(({key:a,label:b})=>(0,e.jsxs)("div",{className:k().userInfoRow,children:[(0,e.jsx)("span",{className:k().label,children:b}),d?(0,e.jsx)("input",{type:"text",value:t.addresses[0][a]||"",onChange:b=>{let c=t.addresses.map((c,d)=>0===d?{...c,[a]:b.target.value}:c);u({...t,addresses:c})},className:k().inputField}):(0,e.jsx)("span",{className:k().value,children:t.addresses[0][a]||"-"})]},a)),(0,e.jsx)("div",{className:k().buttonWrapper,children:d?(0,e.jsx)("button",{className:k().saveButton,onClick:x,children:"Save"}):(0,e.jsx)("button",{className:k().editButton,onClick:()=>j(!0),children:"Edit"})})]})]}),(0,e.jsxs)("div",{className:k().ordersSection,children:[(0,e.jsx)("h2",{children:"Your Orders"}),Array.isArray(p)&&p.length>0?(0,e.jsx)("div",{className:k().ordersContainer,children:[...p].sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt)).map(a=>{let b=Object.values(a.customer.address).filter(a=>a&&a.trim()).join(", ");return(0,e.jsxs)("div",{className:k().orderCard,children:[(0,e.jsxs)("div",{className:k().orderHeader,children:[(0,e.jsxs)("h3",{children:["Order #",a.sku||a._id]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("b",{children:"Total:"})," $",a.total.toFixed(2)]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("b",{children:"Status:"})," ",["Pending","Preparing","On the way","Delivered"][a.status]||"Unknown"]}),(0,e.jsx)("button",{className:k().detailsButton,onClick:()=>{var b;return b=a._id,void s(r===b?null:b)},children:r===a._id?"Hide Details":"View Details"})]}),r===a._id&&(0,e.jsxs)("div",{className:k().orderDetails,children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("b",{children:"Payment:"})," ",0===a.method?"Cash on Delivery":"Online Payment"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("b",{children:"Payment Status:"})," ",a.paymentStatus]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("b",{children:"Delivery:"})," ",new Date(a.deliveryDate).toLocaleDateString()," (",a.deliverySlot,")"]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("b",{children:"Delivery Status:"})," ",a.deliveryStatus]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("b",{children:"Address:"})," ",b]}),(0,e.jsxs)("div",{className:k().itemsContainer,children:[(0,e.jsx)("h4",{children:"Items"}),a.items.map(a=>(0,e.jsxs)("div",{className:k().itemRow,children:[(0,e.jsx)("img",{src:a.image,alt:a.title,className:k().itemImage}),(0,e.jsxs)("div",{className:k().itemDetails,children:[(0,e.jsx)("p",{children:(0,e.jsx)("b",{children:a.title})}),(0,e.jsxs)("p",{children:["Qty: ",a.quantity]}),(0,e.jsxs)("p",{children:["Price: $",a.price.toFixed(2)]}),a.notes&&(0,e.jsxs)("p",{children:["Notes: ",a.notes]}),a.whom&&(0,e.jsxs)("p",{children:["Ordered for: ",a.whom]}),a.extras?.length>0&&(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:"Extras:"}),(0,e.jsx)("ul",{children:a.extras.map((a,b)=>(0,e.jsxs)("li",{children:[a.text," ",a.price?`(+$${a.price})`:""]},b))})]})]})]},a._id))]})]})]},a._id)})}):(0,e.jsx)("p",{children:"No orders yet."})]})]}),(0,e.jsx)(n.A,{message:v.message,show:v.show,setShow:a=>w({...v,show:a})})]}):null}[i,l,m,o]=p.then?(await p)():p,d()}catch(a){d(a)}})},9756:a=>{"use strict";a.exports=import("redux")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[6238,9765,3317,5781,6095],()=>b(b.s=6514));module.exports=c})();