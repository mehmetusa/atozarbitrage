"use strict";(()=>{var a={};a.id=1346,a.ids=[636,1346,3220],a.modules={361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},939:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>r,default:()=>n,getServerSideProps:()=>q,getStaticPaths:()=>p,getStaticProps:()=>o,handler:()=>z,reportWebVitals:()=>s,routeModule:()=>y,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>u,unstable_getStaticProps:()=>t});var e=c(3885),f=c(237),g=c(1413),h=c(3317),i=c.n(h),j=c(6095),k=c(4762),l=c(2289),m=a([j]);j=(m.then?(await m)():m)[0];let n=(0,g.M)(k,"default"),o=(0,g.M)(k,"getStaticProps"),p=(0,g.M)(k,"getStaticPaths"),q=(0,g.M)(k,"getServerSideProps"),r=(0,g.M)(k,"config"),s=(0,g.M)(k,"reportWebVitals"),t=(0,g.M)(k,"unstable_getStaticProps"),u=(0,g.M)(k,"unstable_getStaticPaths"),v=(0,g.M)(k,"unstable_getStaticParams"),w=(0,g.M)(k,"unstable_getServerProps"),x=(0,g.M)(k,"unstable_getServerSideProps"),y=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/user/[email]",pathname:"/user/[email]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:k}),z=(0,l.U)({srcPage:"/user/[email]",config:r,userland:k,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});d()}catch(a){d(a)}})},1242:a=>{a.exports=require("redux-persist/integration/react")},2015:a=>{a.exports=require("react")},2326:a=>{a.exports=require("react-dom")},2541:a=>{a.exports=require("redux-persist/lib/storage")},3787:a=>{a.exports=require("redux-persist")},3873:a=>{a.exports=require("path")},4030:(a,b,c)=>{c.d(b,{A:()=>h});var d=c(6037),e=c.n(d);let f=process.env.MONGO_URL;if(!f)throw Error("Please define the MONGO_URL environment variable inside .env.local");let g=global.mongoose;g||(g=global.mongoose={conn:null,promise:null});let h=async function(){return g.conn||(g.promise||(g.promise=e().connect(f,{bufferCommands:!1}).then(a=>a)),g.conn=await g.promise),g.conn}},4062:a=>{a.exports=import("react-redux")},4075:a=>{a.exports=require("zlib")},4722:a=>{a.exports=require("next-auth/react")},4762:(a,b,c)=>{c.r(b),c.d(b,{default:()=>j});var d=c(4030),e=c(6037),f=c.n(e);let g=new(f()).Schema({street:{type:String,required:!0},city:{type:String,required:!0},state:{type:String},zip:{type:String},country:{type:String,default:"USA"},isDefault:{type:Boolean,default:!1}},{timestamps:!0}),h=new(f()).Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},password:{type:String},phone:{type:String},addresses:[g],role:{type:String,default:"user"},resetToken:{type:String},resetTokenExpiry:{type:Date}},{timestamps:!0}),i=f().models.User||f().model("User",h);async function j(a,b){let{email:c}=a.query;switch(await (0,d.A)(),a.method){case"GET":try{let a=await i.findOne({email:c});if(!a)return b.status(404).json({error:"User not found"});b.status(200).json(a)}catch(a){console.error(a),b.status(500).json({error:"Failed to fetch user"})}break;case"PUT":try{let d=await i.findOneAndUpdate({email:c},{$set:a.body},{new:!0});if(!d)return b.status(404).json({error:"User not found"});b.status(200).json(d)}catch(a){console.error(a),b.status(500).json({error:"Failed to update user"})}break;default:b.setHeader("Allow",["GET","PUT"]),b.status(405).end(`Method ${a.method} Not Allowed`)}}},6037:a=>{a.exports=require("mongoose")},6060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},6401:a=>{a.exports=require("next-seo")},7910:a=>{a.exports=require("stream")},8732:a=>{a.exports=require("react/jsx-runtime")},9021:a=>{a.exports=require("fs")},9198:a=>{a.exports=import("@reduxjs/toolkit")},9756:a=>{a.exports=import("redux")}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[6238,9765,3317,5781,6095],()=>b(b.s=939));module.exports=c})();